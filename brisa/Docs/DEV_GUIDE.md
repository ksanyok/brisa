# Руководство разработчика

Этот документ помогает новым участникам понять, как устроен код Brisa, и начать работу над развитием проекта.

## Структура кода

Проект состоит из следующих модулей (см. папку `BrisaApp/Sources`):

- **App/**: точка входа приложения, делегат, окна Overlay и Clone View.
- **UI/**: SwiftUI‑представления и окна настроек.
- **Realtime/**: клиент WebRTC и обёртка над OpenAI Realtime API.
- **Intent/**: парсер намерений пользователя и планировщик задач.
- **Exec/**: исполнители шагов (Browser CDP, UI Executor, Shell Executor).
- **Security/**: классификация рисков и политика подтверждений.
- **Capture/**: захват экрана для Clone View.
- **Storage/**: журналирование и сохранение артефактов.
- **Update/**: менеджер обновлений (Sparkle).

## Сборка проекта

1. Установите Xcode 15 или новее и убедитесь, что у вас настроен запуск приложений для macOS.
2. Откройте файл [`Package.swift`](../Package.swift) в Xcode. C Xcode 15 и новее вы можете напрямую работать со Swift Package без `.xcodeproj`.  
   Если по какой‑то причине требуется классический `.xcodeproj`, его можно сгенерировать командой:

   ```bash
   swift package generate-xcodeproj
   ```

   После этого в корне проекта появится `Brisa.xcodeproj`, который можно открыть в Xcode.
3. Соберите и запустите приложение. При первом запуске запросите необходимые разрешения и укажите ваш API ключ OpenAI.

## Тестирование

В каталоге `BrisaApp/Tests` находятся директории для юнит‑тестов (`Unit`) и интеграционных тестов (`Integration`). На этапе MVP эти тесты являются заглушками. При добавлении новой функциональности обязательно дополняйте тесты для проверки поведения модулей.

Для запуска тестов используйте меню **Product → Test** в Xcode, открывший `Package.swift`, или команду:

```bash
swift test
```

## Код-стайл и правила

- Используйте Swift 5.9+ и придерживайтесь официальных [Swift API Design Guidelines](https://www.swift.org/documentation/api-design-guidelines/).
- Компоненты должны быть модульными, с чёткими областями ответственности.
- Длительные операции и взаимодействие с OpenAI выполняйте асинхронно.
- Все публичные API сопровождайте документацией и комментариями.

## Вклад

Пожалуйста, ознакомьтесь с [CONTRIBUTING.md](../CONTRIBUTING.md) перед отправкой pull request. Мы приветствуем баг‑репорты, предложения по улучшению и новые функции. Следуйте политике безопасности и подтверждений при добавлении кода, который выполняет высокорисковые операции.